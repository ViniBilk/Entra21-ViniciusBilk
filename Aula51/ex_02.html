<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .card{
            height: 200px;
            width: 200px;
            background-color: pink;
        }
    </style>
</head>
<body>
    <input type="number" name="inputEpisode" id="inputEpisode">
    <input type="submit" name="sub" id="sub">
    <div id="global">
    </div>
    <script>
        // 2) Implemente um script que consuma a api: https://rickandmortyapi.com/.
        
        // * Crie uma página que carregue 9 personagens aleatórios e os mostre em cards.
        // * Crie uma página que permita selecionar um episódio e mostra todos os personagens que fizeram parte daquele episódio.       
        // * Crie uma página que mostre todos os Ricks que estão vivos.

        // let armazenaNumeros = []
            // for(let i = 0;i < 10;i++){
            //     let numero = Math.round(Math.random()* (671 - 1) + 1)
            //     armazenaNumeros[i] = numero
            // }
            
            // let stringNumbers = armazenaNumeros.join()

        let numeroEpisodeo = document.getElementById("inputEpisode"),
            sub = document.getElementById("sub")

        let global = document.getElementById("global")

        var invalidChars = ["-","+","e",]

        numeroEpisodeo.addEventListener("keydown", (e) => {
            if(invalidChars.includes(e.key)){
                e.preventDefault()
            }
        })

        function limpaElemento(elemento) {    
            console.log(elemento);        
            while (elemento.children.length) {
                console.log(elemento.chlidren);
                elemento.firstElementChild.remove();
            }
        }

        sub.addEventListener("click", (event) =>{
            if(numeroEpisodeo.value > 41){
                return alert("Numero Inválido")
            }else{
                limpaElemento(global)
                getRickandMorty(numeroEpisodeo.value)
            }
        })

        async function getRickandMorty(episode) {
            // "https://rickandmortyapi.com/api/character/1".split("/").pop()

            let response = await fetch(`https://rickandmortyapi.com/api/episode/${episode}`, {
            });

            if (!response.ok) {
                return console.log("A requisição falhou!")
            }

            let body = await response.json();
            let characters = body.characters
    
            for(let i = 0;i < characters.length; i++){
                let response1 = await fetch(`${body.characters[i]}`, {
                    });

                let body1 = await response1.json();
                console.log(body1)
                createRicandMorty(body1.image)
            }
        }

        function createRicandMorty(url) {
            let div = document.createElement("div")
            div.classList.add("card")
            global.append(div)
            let img = document.createElement("img");

            img.src = url;

            div.append(img);
        }

        getRickandMorty();
    </script>
</body>
</html>